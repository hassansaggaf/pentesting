## Passive Information Gathering

Passive information gathering is when you check stuff like:

  **-Web information**
  
  **-Email Harvesting**
  
  **-Whois enumeration**
  
 Passive mean you **do not directly** interact with the servers/service.
 
 ### Steps

**1. Visit the website**

  -look around
  
  -read about the target
  
  -what they do
  

**2. Whois**

  -find out who is behind the website
  
  -resolve the DNS
  
``` 
host website.com
nslookup website.com
```

  -use the ip to do WHOIS
  
```
whois 192.168.1.1
```

**3. Netcraft**
  -Most of the info on netcraft are not unique, it has basic whois info.
  -The advantage is, it bypasses Cloudflare and other services that hide the IP
  -Netcraft check the records before the site implemented Cloudflare
```  
www.netcraft.com
```
**4. References**

[Technical Info](http://www.technicalinfo.net/papers/PassiveInfoPart1.html)

[Additional Notes](https://www.securitysift.com/passive-reconnaissance/)

### Important things to find during passive recon

**Identifying IP addresses and subdomains**

-usually one of the first step in passive recon
-it is important to identify the net ranges and subdomains associated with your target

**Identifying 3rd party / external site**

-although they might not be in the scope for active penetration testing, it is important to know the relationship
between your target and the 3rd party

**Identifying people**

-identifying people, emails, phone numbers, and other personal details.
-for pretexting, phishing or other social engineering attacks

**Identifying technologies** 

-identifying the types and versions of the systems and software
-this is important to find potential vulnerabilities

**Identifying content of interest**

-Identifying web/email portals, log files, backup or archived files, or sensitive information within HTML comments 
 or client-side scripts
-important for vulnerability discovery

**Identifying vulnerabilities**

-It's possible to identify critical vulnerabilities that can be exploited
-solely by examining publicly available information

### Finding Subdomains

**This is crucial because the more subdomain = more vulnerabilities**

[Comprehensive List](https://blog.bugcrowd.com/discovering-subdomains)

## Tools

### Finding Subdomains

**recon-ng**

Inorder to find the subdomains we can use recon-ng framework, it has the same basic structure as metasploit

```
recon-ng 

use use recon/domain/hosts/

show options

set source cnn.com
```

all of the domains will be saved in ```hosts```, which you can access through: ```show hosts```

if some of these subdomains are not given an IP, you can run:

```
use recon/hosts-host/resolve
run
```

And it will resolve all the IPs

### Google Dorks


Using google can also help in finding domains

This will only give us the subdomains of a site
```
site:msn.com -site:www.msn.com

site:*.facebook.com
```

To exclude a specific domain you can do this

```
site:*facebook.com -site help.facebook.com
```

### subbrute.py

The basic command is like this
```
./subbrute.py -p cnn.com
```
[Git](https://github.com/TheRook/subbrute)


### knockpy

```
knockpy domain.com
```
[Git](https://github.com/guelfoweb/knock)

### Reverse DNS-Lookup

If you manage to find out the IP range that the target owns. You can see which machines are online. Then you can write a
scipt to find out the domain addresses

[Tool that can do reverse dns](http://www.cyberciti.biz/faq/how-to-test-or-check-reverse-dns/)

### Being smart

You also have to look at what kind of system the target has. Some web-apps give their clients their own subdomains. Like github.

Check out the homepage Often companies brag about their clients. You can use this to guess the subdomains of some clients.

## Online Tools

[DNS Dumpster](https://dnsdumpster.com/)

[Pentest-tools](https://pentest-tools.com/information-gathering/find-subdomains-of-domain)

[Intodns](http://www.intodns.com/)

[DNSStuff](http://www.dnsstuff.com/)

**Bypassing Cloudflare**

https://www.ericzhang.me/resolve-cloudflare-ip-leakage/

www.netcraft.com

**Brute Force Dicts for Subdomains**

https://github.com/bitquark/dnspop

https://github.com/danielmiessler/SecLists/tree/master/Discovery/DNS

**Reference**

[Wikipedia](https://en.wikipedia.org/wiki/CNAME_record)

[DNS Basics](https://www.digitalocean.com/community/tutorials/an-introduction-to-dns-terminology-components-and-concepts)
