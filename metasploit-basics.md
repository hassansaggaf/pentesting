# Metasploit
A pentesting framework

## MSF Filesystem and Libraries

located at ```/usr/share/metasploit-framework```

### Metasploit Filesystem

```
data          : editable files used by Metasploit
documentation : provides docs for the framework
external      : source code and 3rd party libraries
lib           : the 'meat' of the framework code base
modules       : the actual msf modules
plugins       : plugins that can be loaded at run-time
scripts       : Meterpreter and other scripts
tools         : various useful command-line utilities
```
Reading the documentation without internet
```
cd /usr/share/metasploit-framework/doc
python -m SimpleHTTPServer
```

You can even find **wordlists** in ```/usr/share/metasploit-framework/data/wordlists```

### Metasploit Libraries

The msf libraries helps us to run our exploits without having to write additional code for rudimentary tasks, 
such as HTTP requests or encoding of payloads.

**Rex**

- the basic library for most tasks 
- handles sockets, protocols, text transformation and others 
- SSL, SMB, HTTP, XOR, Base64 and Unicode


**MSF:Core**

- Provides the basic API
- Defines the Metasploit Framework


**MSF:Base**

- Provides 'friendly' API
- Provides simplified APIs for use in the framework

### Metasploit Directory Structure

located at ```/root/.msf4``` 

```
history   : keeps all the commands that you type
local     : not much...
logs      : if anything goes wrong its gonna go to this file
loot      : all the fun stuff (screen-captures, hashes, etc)
modules   : all of your custom modules can be put here
plugins   : all of your custom plugins
```

## Starting MSF

This starts the metasploit database and enables fast searches

```
service postgresql start 
msfdb start
```
## MSF Commands

**General**
```
? or help  : display the commands available
banner     : display the awesome metasploit banner
back       : get out of a selected module
exit       : simply exits msf
go_pro     : Launches MSF Web GUI
```

**Searching Commands**
```
search      : Find a module
help search : show more options for search
  app       :  Modules that are client or server attacks
  author    :  Modules written by this author
  bid       :  Modules with a matching Bugtraq ID
  cve       :  Modules with a matching CVE ID
  edb       :  Modules with a matching Exploit-DB ID
  name      :  Modules with a matching descriptive name
  platform  :  Modules affecting this platform
  ref       :  Modules with a matching ref
  type      :  Modules of a specific type (exploit, auxiliary, or post)

#Example

search name:mysql cve:2011 platform:linux
```

**Using Modules**
```
use          : to select an exploit
                use exploit/linux/misc/netsupport_manager_agent

set          : configuring an option
                set RHOST 192.168.1.1

setg         : configuring a global variable (you don't have to set it everytime you use another module

show options : list out all the options you may or may not set 

info         : shows all the information about a module
```

**Other**
```
connect       : Communicate with a host (like netcat)
sessions -l   : list all the active sessions
sessions -i 1 : interact with session 1
```



<img src='https://www.tunnelsup.com/images/Metasploit.png' id='msf cheatsheet'>
